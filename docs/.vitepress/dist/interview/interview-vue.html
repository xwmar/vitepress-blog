<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. 什么是 M V  VM | xWANG</title>
    <meta name="description" content="Just playing around.">
    <link rel="stylesheet" href="/assets/style.dbb0e068.css">
    <link rel="modulepreload" href="/assets/Home.16705f27.js">
    <link rel="modulepreload" href="/assets/app.fbdbcb16.js">
    <link rel="modulepreload" href="/assets/interview_interview-vue.md.2597cbd3.lean.js">
    <link rel="modulepreload" href="/assets/app.fbdbcb16.js">
    <meta name="twitter:title" content="1. 什么是 M V  VM | xWANG">
    <meta property="og:title" content="1. 什么是 M V  VM | xWANG">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-7161a24b><div class="sidebar-button" data-v-7161a24b><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="xWANG, back to home" data-v-7161a24b data-v-4a583abe><!----> xWANG</a><div class="flex-grow" data-v-7161a24b></div><div class="nav" data-v-7161a24b><nav class="nav-links" data-v-7161a24b data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>Vue</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/vue3" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>vue3入门</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/react-js" data-v-641633f9>React.js <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/mini-program" data-v-641633f9>小程序 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>面试题库</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-html" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>HTML</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-css" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>CSS</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-js" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>JavaScript</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-es6" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>ES6/DOM</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item active" href="/interview/interview-vue" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Vue.js</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-http" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>HTTP协议</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/pigeonhole" data-v-641633f9>归档 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/about" data-v-641633f9>关于 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-6b49cdcd><nav class="nav-links nav" data-v-6b49cdcd data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>Vue</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/vue3" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>vue3入门</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/react-js" data-v-641633f9>React.js <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/mini-program" data-v-641633f9>小程序 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-dropdown-link" data-v-15acbf05 data-v-90f2c308><button class="button" data-v-90f2c308><span class="button-text" data-v-90f2c308>面试题库</span><span class="right button-arrow" data-v-90f2c308></span></button><ul class="dialog" data-v-90f2c308><!--[--><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-html" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>HTML</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-css" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>CSS</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-js" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>JavaScript</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-es6" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>ES6/DOM</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item active" href="/interview/interview-vue" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>Vue.js</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><li class="dialog-item" data-v-90f2c308><div class="nav-dropdown-link-item" data-v-90f2c308 data-v-57d767ef><a class="item" href="/interview/interview-http" data-v-57d767ef><span class="arrow" data-v-57d767ef></span><span class="text" data-v-57d767ef>HTTP协议</span><span class="icon" data-v-57d767ef><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/pigeonhole" data-v-641633f9>归档 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/about" data-v-641633f9>关于 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-6b49cdcd><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-什么是-m-v-vm">1. 什么是 M V  VM</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-mvvm的优缺点有哪些？">2. MVVM的优缺点有哪些？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-谈谈对vue生命周期的理解？">3. 谈谈对Vue生命周期的理解？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-在vue中网络请求应该放在哪个生命周期中发起？">4. 在Vue中网络请求应该放在哪个生命周期中发起？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-vue组件之间如何进行通信？">5. Vue组件之间如何进行通信？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-1-props-和-emit">5.1  props 和 $emit</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-2-eventbus事件总线">5.2  eventBus事件总线</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-3-children-parent-refs">5.3 $children $parent  $refs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-4-provide-inject">5.4 provide inject</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-5-attrs-listeners">5.5 $attrs $listeners</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-6-vuex">5.6 Vuex</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_6-computed-和-watch的区别是什么？">6. computed 和 watch的区别是什么？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-vue双向绑定原理？">7. Vue双向绑定原理？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-1-基本认知">7.1 基本认知</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-2-object-defineproperty和proxy的优缺点？">7.2 Object.defineProperty和Proxy的优缺点？</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-如何理解vue的响应式系统？">8. 如何理解Vue的响应式系统？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-1-基本原理">8.1 基本原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-2-观察者模式">8.2 观察者模式</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_9-vue中的key到底有什么用？">9. Vue中的key到底有什么用？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_9-1-key的作用">9.1 key的作用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_9-2-key的常见应用场景">9.2 key的常见应用场景</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_10-vue-跳转路由时的传参方式-query和params的区别">10. Vue 跳转路由时的传参方式 (query和params的区别)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_11-vue-项目进行-seo-优化">11. Vue 项目进行 SEO 优化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_12-vue-项目权限处理">12. Vue 项目权限处理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_13-vue-项目支付功能">13. Vue 项目支付功能</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_14-如何处理-打包出来的项目-首屏-加载过慢的问题">14. 如何处理 打包出来的项目(首屏)加载过慢的问题</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_15-你在项目中遇到过什么技术难题">15. 你在项目中遇到过什么技术难题</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_16-请简单介绍一下你的项目">16. 请简单介绍一下你的项目</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h2 id="_1-什么是-m-v-vm"><a class="header-anchor" href="#_1-什么是-m-v-vm" aria-hidden="true">#</a> 1. 什么是 M V VM</h2><p>Model-View-ViewModel 模式</p><p><img src="http://pic.qigou.top/vue/image-20210223221853817.png" alt=""></p><p><strong>Model 层</strong>: 数据模型层</p><p>通过 <code>Ajax</code>、<code>fetch</code> 等 API 完成客户端和服务端业务模型的同步。</p><p><strong>View 层</strong>: 视图层</p><p>作为视图模板存在，其实View 就是⼀个动态模板。</p><p><strong>ViewModel 层</strong>: 视图模型层</p><p>负责暴露数据给 View 层，并对 View 层中的数据绑定声明、 指令声明、 事件绑定声明, 进行实际的业务逻辑实现。</p><p><strong>数据变化了, 视图自动更新</strong> =&gt; ViewModel 底层会做好监听Object.defineProperty，当数据变化时，View 层会自动更新</p><p><strong>视图变化了, 绑定的数据自动更新</strong> =&gt; 会监听双向绑定的表单元素的变化，⼀旦变化，绑定的数据也会得到⾃动更新。</p><h2 id="_2-mvvm的优缺点有哪些？"><a class="header-anchor" href="#_2-mvvm的优缺点有哪些？" aria-hidden="true">#</a> 2. MVVM的优缺点有哪些？</h2><p><strong>优点</strong></p><ol><li><p>实现了视图（View）和模型（Model）的分离，降低代码耦合、提⾼视图或逻辑的复⽤性</p></li><li><p>提⾼了可测试性：ViewModel 的存在可以帮助开发者更好地编写测试代码</p></li><li><p>能⾃动更新 DOM：利⽤双向绑定，数据更新后视图⾃动更新，让开发者从繁琐的⼿动操作 DOM 中解放出来</p></li></ol><p><strong>缺点</strong></p><ol><li><p>Bug 难被调试：因为使⽤了双向绑定的模式，当我们看到界⾯发生异常了，有可能是 View 的代码产生的 Bug，</p><p>也有可能是Model 代码的问题。数据绑定使得⼀个位置的 Bug 被快速传递到别的位置，</p><p>要定位原始出问题的地⽅就变得不那么容易了</p><p>可采用的调试方案:</p><p>(1) 注释掉一段代码, 确定代码的位置</p><p>(2) debugger 打断点 或者 console 进行调试</p></li><li><p>在⼀个⼤的模块中 Model 也会很⼤，虽然使⽤上来说⽅便了，但如果⻓期持有不释放内存，就会造成更多的内存消耗</p><p>占用的是 浏览器的 内存</p></li></ol><h2 id="_3-谈谈对vue生命周期的理解？"><a class="header-anchor" href="#_3-谈谈对vue生命周期的理解？" aria-hidden="true">#</a> 3. 谈谈对Vue生命周期的理解？</h2><p><strong>生命周期的概念</strong></p><p>每个 Vue 实例(每个组件也都是一个vue实例)都有⼀个完整的⽣命周期：</p><ol><li>开始创建 (空实例)</li><li>初始化数据</li><li>编译模版</li><li>挂载 DOM</li><li>渲染、更新数据 =&gt; 重新渲染</li><li>卸载</li></ol><p>这⼀系列过程我们称之为 Vue 的⽣命周期。</p><p><strong>各个生命周期的作用</strong></p><table><thead><tr><th>生命周期</th><th>执行时机</th></tr></thead><tbody><tr><td>beforeCreate</td><td>在组件实例被创建之初、组件的属性⽣效之前被调用</td></tr><tr><td>created</td><td>在组件实例已创建完毕。此时属性也已绑定，但真实DOM还未⽣成，$el 还不可⽤</td></tr><tr><td>beforeMount</td><td>在组件挂载开始之前被调⽤。相关的 render 函数⾸次被调⽤</td></tr><tr><td>mounted</td><td>在 el 被新建的 vm.$el 替换并挂载到实例上之后被调用</td></tr><tr><td>beforeUpdate</td><td>在组件数据修改了, 视图更新之前调⽤。发⽣在虚拟 DOM 打补丁之前</td></tr><tr><td>updated</td><td>在组件数据修改了, 视图更新之后被调用</td></tr><tr><td>activited</td><td>在组件被激活时调⽤（使用了 <code>&lt;keep-alive&gt;</code> 的情况下）</td></tr><tr><td>deactivated</td><td>在组件被停用时调⽤（使用了 <code>&lt;keep-alive&gt;</code> 的情况下）</td></tr><tr><td>beforeDestory</td><td>在组件销毁前调⽤ (销毁: vue默认会进行释放掉实例所有的监听, 释放掉所有的组件...)</td></tr><tr><td>destoryed</td><td>在组件销毁后调⽤ (像定时器, webscoket连接, ... 跟vue没有太大关联的资源, 需要手动释放!)</td></tr></tbody></table><p><strong>生命周期示意图</strong></p><p><img src="http://pic.qigou.top/vue/image-20210224084130350.png" alt=""></p><h2 id="_4-在vue中网络请求应该放在哪个生命周期中发起？"><a class="header-anchor" href="#_4-在vue中网络请求应该放在哪个生命周期中发起？" aria-hidden="true">#</a> 4. 在Vue中网络请求应该放在哪个生命周期中发起？</h2><p>至少在 <code>created</code> 之后, 因为数据才基本初始化完毕, 当然 <code>mounted</code> 中也可以 (比created稍晚一些)</p><h2 id="_5-vue组件之间如何进行通信？"><a class="header-anchor" href="#_5-vue组件之间如何进行通信？" aria-hidden="true">#</a> 5. Vue组件之间如何进行通信？</h2><p>父传子, 子传父, 非父子, Vuex</p><h3 id="_5-1-props-和-emit"><a class="header-anchor" href="#_5-1-props-和-emit" aria-hidden="true">#</a> 5.1 props 和 $emit</h3><p>(1) 通过 <code>props</code> 将数据在组件树中进行⾃上⽽下的传递；</p><div class="language-jsx"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jack</span> <span class="token attr-name">:money</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:obj</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myobj<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jack</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-jsx"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// props: [&#39;money&#39;]</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
      money<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
          <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      obj<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
          <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token punctuation">{</span>
                  name<span class="token operator">:</span> <span class="token string">&#39;zs&#39;</span><span class="token punctuation">,</span>
                  age<span class="token operator">:</span> <span class="token number">18</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>附件: props <a href="https://cn.vuejs.org/v2/guide/components-props.html#Prop-%E9%AA%8C%E8%AF%81" target="_blank" rel="noopener noreferrer">验证</a></p><p>(2) 通过 <code>$emit</code> 和 <code>@</code> 来作信息的向上传递。</p><div class="language-js"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;add-action&#39;</span><span class="token punctuation">,</span> 参数<span class="token number">1</span><span class="token punctuation">,</span> 参数<span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-jsx"><pre><code><span class="token operator">&lt;</span>jack @add<span class="token operator">-</span>action<span class="token operator">=</span><span class="token string">&quot;fatherFn&quot;</span><span class="token operator">&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jack</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_5-2-eventbus事件总线"><a class="header-anchor" href="#_5-2-eventbus事件总线" aria-hidden="true">#</a> 5.2 eventBus事件总线</h3><p>可通过 EventBus 进⾏信息的发布与订阅。 (创建一个都能访问到的事件总线)</p><div class="language-jsx"><pre><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// this.$eventBus</span>
</code></pre></div><div class="language-jsx"><pre><code><span class="token comment">// A组件中, 监听 bus的事件</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$eventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;事件名&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">参数<span class="token number">1</span><span class="token punctuation">,</span> 参数<span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// B组件中, 触发 bus的事件</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$eventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;事件名&#39;</span><span class="token punctuation">,</span> 参数<span class="token number">1</span><span class="token punctuation">,</span> 参数<span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-3-children-parent-refs"><a class="header-anchor" href="#_5-3-children-parent-refs" aria-hidden="true">#</a> 5.3 $children $parent $refs</h3><p>(1) $children</p><p>父组件中, $children 返回的是一个组件集合，如果你能清楚的知道子组件的顺序，你也可以使用下标来操作</p><div class="language-jsx"><pre><code><span class="token comment">// 父组件中</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello_world<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-b</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>this.$children[0] =&gt; <code>&lt;com-a&gt;&lt;/com-a&gt;</code></p><p>this.$children[1] =&gt; <code>&lt;com-b&gt;&lt;/com-b&gt;</code></p><p>(2) $parent</p><p>子组件中, this.$parent 指向父组件</p><p><a href="http://this.$parent.xxx" target="_blank" rel="noopener noreferrer">this.$parent.xxx</a> = 200</p><p>this.$parent.fn()</p><p>(3) $refs</p><p>通过添加 ref 和 $refs 配合, 也可以很方便的获取子组件, 访问调用子组件的属性或方法</p><div class="language-jsx"><pre><code><span class="token comment">// 父组件中</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello_world<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-a</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>coma<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">  // this.$refs.coma.count = 200
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-b</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-b</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">  // this.$refs.comb.addFn()
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>this.$refs.coma =&gt; <code>&lt;com-a&gt;&lt;/com-a&gt;</code></p><p>this.$refs.comb =&gt; <code>&lt;com-b&gt;&lt;/com-b&gt;</code></p><h3 id="_5-4-provide-inject"><a class="header-anchor" href="#_5-4-provide-inject" aria-hidden="true">#</a> 5.4 provide inject</h3><p>**成对出现：**provide和inject是成对出现的</p><p><strong>作用</strong>：用于父组件向子孙组件传递数据</p><p><strong>使用方法：</strong></p><ul><li>provide在父组件中, 返回要传给下级的数据</li><li>inject在需要使用这个数据的子孙组件中注入数据。（不论组件层次有多深）</li></ul><p>父组件</p><div class="language-jsx"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">provide</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token comment">// 共享给子孙组件的数据</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            value<span class="token operator">:</span> <span class="token string">&#39;父组件的数据&#39;</span><span class="token punctuation">,</span>
            money<span class="token operator">:</span> <span class="token number">100</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>子孙组件</p><div class="language-jsx"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    inject<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-5-attrs-listeners"><a class="header-anchor" href="#_5-5-attrs-listeners" aria-hidden="true">#</a> 5.5 $attrs $listeners</h3><p>在 Vue 2.4 版本中加⼊的 <code>$attrs</code> 和 <code>$listeners</code> 可以用来作为跨级组件之间的通信机制。 (父传孙)</p><p><strong>父组件</strong></p><div class="language-jsx"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    &lt;my-child1 :money=&quot;100&quot; desc=&#39;你好哇&#39; @test1=&quot;fn1&quot; @test2=&quot;fn2&quot;&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-child1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>子组件</strong></p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-child1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- $attrs =&gt; { &quot;money&quot;: 100, &quot;desc&quot;: &quot;你好哇&quot; } --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ $attrs }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-child2</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-child2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> MyChild2 <span class="token keyword">from</span> <span class="token string">&#39;./my-child2&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$listeners<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    MyChild2
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="http://pic.qigou.top/vue/image-20210309011422081.png" alt=""></p><p><strong>孙组件</strong></p><div class="language-jsx"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    我是child2 - </span><span class="token punctuation">{</span><span class="token punctuation">{</span> money <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text"> - </span><span class="token punctuation">{</span><span class="token punctuation">{</span> desc <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
    &lt;button @click=&quot;clickFn&quot;&gt;按钮</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
export default {
  props: [&#39;money&#39;, &#39;desc&#39;],
  methods: {
    clickFn () {
      this.$emit(&#39;test1&#39;, &#39;嘎嘎&#39;)
      this.$emit(&#39;test2&#39;, &#39;嘿嘿&#39;)
    }
  }
}
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="http://pic.qigou.top/vue/image-20210309122823432.png" alt=""></p><h3 id="_5-6-vuex"><a class="header-anchor" href="#_5-6-vuex" aria-hidden="true">#</a> 5.6 Vuex</h3><p>全局状态管理库。可通过它来进行全局数据流的管理。</p><p><strong>state</strong>: 存放数据</p><p><strong>mutations</strong>: 存放操作数据的方法</p><p><strong>actions</strong>: 存放一些异步操作 (也可以进行一些同步处理) 注意: actions是不能直接修改state数据的, 需要提交mutation</p><p><strong>getters</strong>: 存放基于state计算出来的一些值 (计算属性)</p><p><strong>modules</strong>: 分模块, 项目大了, 也推荐分模块管理 (同模块的vuex操作, 就会在一起)</p><p>注意点: 分模块了, 默认muations, actions, getters 注册到全局的, 一般会开启命名空间</p><p>语法: <strong>namespaced: true</strong></p><h2 id="_6-computed-和-watch的区别是什么？"><a class="header-anchor" href="#_6-computed-和-watch的区别是什么？" aria-hidden="true">#</a> 6. computed 和 watch的区别是什么？</h2><p><strong>computed</strong></p><ol><li>它是计算属性。主要用于值的计算并一般会返回一个值。所以它更多⽤于计算值的场景</li><li>它具有缓存性。当访问它来获取值时，它的 getter 函数所计算出来的值会进行缓存</li><li>只有当它依赖的属性值发生了改变，那下⼀次再访问时才会重新调⽤ getter 函数来计算</li><li>它适⽤于计算⽐较消耗性能的计算场景</li><li>必须要有一个返回值</li></ol><p><strong>watch</strong></p><ol><li><p>它更多的是起到 “观察” 的作⽤，类似于对数据进行变化的监听并执行回调。</p><p>主要⽤于观察 <code>props</code> 或 本组件data的值，当这些值发生变化时，执⾏处理操作</p></li><li><p>不一定要返回某个值</p></li></ol><p><strong>建议</strong></p><ol><li><p>当目的是进⾏数值计算，且依赖于其他数据，那么推荐使用 <code>computed</code></p></li><li><p>当需要在某个数据发生变化的, 同时做⼀些稍复杂的逻辑操作，那么推荐使⽤ <code>watch</code></p></li></ol><h2 id="_7-vue双向绑定原理？"><a class="header-anchor" href="#_7-vue双向绑定原理？" aria-hidden="true">#</a> 7. Vue双向绑定原理？</h2><h3 id="_7-1-基本认知"><a class="header-anchor" href="#_7-1-基本认知" aria-hidden="true">#</a> 7.1 基本认知</h3><p>在 Vue 2.x 中，利⽤的是 <code>Object.defineProperty</code> 去劫持对象的访问器（Getter、Setter），</p><p>当对象<code>属性值</code>发⽣变化时可获取变化，然后根据变化来作后续响应；(一个一个的劫持)</p><p>在 Vue 3.0 中，则是通过 <code>Proxy</code> 代理对象进⾏类似的操作。劫持的是整个对象, 只要对象中的属性变化了, 都能劫持到</p><h3 id="_7-2-object-defineproperty和proxy的优缺点？"><a class="header-anchor" href="#_7-2-object-defineproperty和proxy的优缺点？" aria-hidden="true">#</a> 7.2 Object.defineProperty和Proxy的优缺点？</h3><p><strong>Proxy</strong></p><ul><li><p>可以直接监听整个对象，⽽⾮是对象的某个属性</p></li><li><p>可以直接监听数组的变化</p></li><li><p>拦截⽅法丰富：多达13种，不限于<code>get</code> <code>set</code> <code>deleteProperty</code>、<code>has</code> 等。</p><p>比 <code>Object.defineProperty</code> 强大很多</p></li></ul><p><strong>Object.defineProperty</strong></p><ul><li>兼容性较好（可⽀持到 IE9）</li></ul><h2 id="_8-如何理解vue的响应式系统？"><a class="header-anchor" href="#_8-如何理解vue的响应式系统？" aria-hidden="true">#</a> 8. 如何理解Vue的响应式系统？</h2><p>(考察MVVM) M: model数据模型, V:view视图模型, VM: viewModel视图数据模型</p><p>双向:</p><ol><li>视图变化了, 数据自动更新 =&gt; 监听原生的事件即可, 输入框变了, 监听输入框input事件</li><li>数据变化了, 视图要自动更新 =&gt; vue2 和 vue3</li></ol><h3 id="_8-1-基本原理"><a class="header-anchor" href="#_8-1-基本原理" aria-hidden="true">#</a> 8.1 基本原理</h3><p>vue2.0 数据劫持: Object.defineProperty (es5)</p><p>vue3.0 数据劫持: Proxy (es6)</p><p>分析 :此题考查 Vue的 MVVM 原理</p><p>解答: Vue的双向绑定原理其实就是 MVVM 的基本原理, Vuejs官网已经说明, 实际就是通过 Object.defineProperty方法 完成了对于Vue实例中数据的 <strong><code>劫持</code></strong>, 通过对于 data中数据 进行set的劫持监听, 然后通过**<code>观察者模式</code>**, 通知 对应的绑定节点 进行节点数据更新, 完成数据驱动视图的更新</p><p>简单概述 : 通过Object.defineProperty 完成对于数据的劫持, <strong>通过观察者模式</strong>, 完成对于节点的数据更新</p><h3 id="_8-2-观察者模式"><a class="header-anchor" href="#_8-2-观察者模式" aria-hidden="true">#</a> 8.2 观察者模式</h3><p>观察者模式: 当对象间存在 <strong>一对多</strong> 关系时，则使用观察者模式（Observer Pattern）。</p><p>比如，当一个对象或者数据被修改时，则会自动通知依赖它的对象。</p><p>**意图：**定义对象间的一种 <code>一对多的依赖关系</code>，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。</p><p>拍卖会的时候，大家相互叫价，拍卖师(Dep) 会观察 最高标价(利用Object.defineProperty监听)，</p><p>一旦最高价变化了, 然后通知给其它竞价者(watcher观察者 - 订阅者, 订阅了价格的变化)，这就是一个观察者模式</p><p>下图为Vue框架在数据初始化中使用观察者模式的示意图：</p><p><img src="http://pic.qigou.top/vue/image-20201208122803496.png" alt=""><img src="http://pic.qigou.top/vue/image-20210309151257119.png" alt=""></p><p>Dep要进行 <strong>依赖收集</strong>，并通过一个subs数组, 记录观察者Watcher,</p><p>Watcher 分为 <strong>渲染 watcher、计算属性 watcher、侦听器 watcher</strong> 三种</p><p>收集依赖: 简单点说就是谁借了我的钱，我就把那个人 <strong>记下来</strong> ，以后我的钱少了 我就通知他们说我没钱了</p><div class="language-jsx"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token punctuation">{</span> msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">   // Watcher1(渲染), 依赖于msg
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token punctuation">{</span> car <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">   // Watcher2(渲染),  依赖于car
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token punctuation">{</span> myMsg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">   // Watcher3(渲染), 依赖于myMsg
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

computed<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">myMsg</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;计算属性重新计算了&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">+</span> <span class="token string">&#39;20&#39;</span>  <span class="token comment">// Watcher4(计算属性中), 依赖于msg, msg变了重新计算</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

watch<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">msg</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;新的msg&#39;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span> <span class="token comment">// Watcher5(侦听器), 将来msg变化, 这边要执行这个函数</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">// 收集依赖 (dep结构有点类似于二维数组, (Map结构))   arr.type=&quot;msgDep&quot;</span>
dep<span class="token operator">:</span> <span class="token punctuation">[</span>
  msgDep<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Watcher5</span><span class="token punctuation">(</span>侦听器<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Watcher4</span><span class="token punctuation">(</span>计算属性中<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Watcher1</span><span class="token punctuation">(</span>渲染<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  carDep<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Watcher2</span><span class="token punctuation">(</span>渲染<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  myMsgDep<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Watcher3</span><span class="token punctuation">(</span>渲染<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

<span class="token comment">// Watcher</span>
<span class="token punctuation">{</span>
  callback<span class="token operator">:</span> Function<span class="token punctuation">,</span> <span class="token punctuation">(</span>数据变化后<span class="token punctuation">,</span> 需要执行的回调<span class="token punctuation">)</span>
  isRenderWatcher<span class="token operator">:</span> Boolean<span class="token punctuation">,</span> <span class="token punctuation">(</span>是否是render的watcher<span class="token punctuation">,</span> 是否要触发视图的更新<span class="token punctuation">,</span> 往后放<span class="token punctuation">,</span> 最后统一虚拟dom对比<span class="token punctuation">,</span> 统一更新<span class="token punctuation">)</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>比如: 假定数据 money 变了, 那么没有任何与money相关的观察者, 就不需要进行任何更新操作, 也不需要执行任何的监视函数</p><p>然而: 假定数据 msg 变了, 就会通知到相关的Watcher, 且优先通知侦听器Watcher和计算属性Watcher, 后进行统一的渲染更新</p><ol><li>通知侦听器Watcher, 立刻执行配置的函数, console.log(&#39;新的msg&#39;, newValue)</li><li>通知计算属性Watcher, 计算属性依赖的值变了, 需要重新计算 且更新后, myMsg 变化了, 需要进行进行视图的渲染 (render) (--- 要更新, 等着---)</li><li>通过到watcher1, 渲染Watcher (---要更新---)</li><li>最后统一进行, 新旧虚拟dom的对比, 完成视图的更新</li></ol><p><strong>当数据状态发生改变时，会被 Object.defineProperty 监听劫持到, 会通知到 Dep, 并根据收集的依赖关系,</strong></p><p><strong>让订阅者Watcher进行数据更新（update）操作 , 派发更新</strong></p><p>总结概述: vue采用的是观察者模式, 是一种<code>一对多</code>的关系, 一上来vue在解析渲染时, 会进行依赖收集, 会将渲染 watcher、计算属性 watcher、侦听器 watcher, 都收集到对应的dep中, 将来Object.defineProperty 监听到数据变化, 就根据依赖关系, 派发更新</p><h2 id="_9-vue中的key到底有什么用？"><a class="header-anchor" href="#_9-vue中的key到底有什么用？" aria-hidden="true">#</a> 9. Vue中的key到底有什么用？</h2><p><code>key</code> 是为 Vue 中的虚拟 DOM 节点（vNode）标记唯⼀性的 id。</p><h3 id="_9-1-key的作用"><a class="header-anchor" href="#_9-1-key的作用" aria-hidden="true">#</a> 9.1 key的作用</h3><p>作用: 给虚拟dom添加标识, <strong>(优化复用对比策略, 优化渲染性能)</strong></p><p>主要考察:</p><ol><li><p>vue 的更新机制 (差异化更新) 对比新旧虚拟dom, 找出不同的部分, 进行更新视图</p><p>为什么对比虚拟dom, 而不对比真实的dom ? 真实的dom太复杂, 对比起来性能太差</p></li><li><p>虚拟dom: 使用 js 对象的方式, 模拟真实的 dom 结构 { type: &#39;div&#39;, className: &#39;box&#39; , children: [] }</p><p>属性的量大大的减少了, 没有真实dom的那么多无效的属性, 对比起来性能高很多</p></li><li><p>diff 算法: 默认的对比(diff) 机制, 同层兄弟元素, 是按照下标进行对比的, 但是加了 key, <strong>就相当于给虚拟dom加了个标识</strong></p><p>对比策略, 就是对相同key的元素进行对比了, 在列表v-for中, key的使用尤为常见, 可以用于优化渲染性能</p></li></ol><p><img src="http://pic.qigou.top/vue/image-20210309155633728.png" alt=""></p><h3 id="_9-2-key的常见应用场景"><a class="header-anchor" href="#_9-2-key的常见应用场景" aria-hidden="true">#</a> 9.2 key的常见应用场景</h3><p>key 的常见应用场景 =&gt; v-for, v-for 遍历的列表中的项的顺序, 非常的容易改变</p><p>1 往后面加, 默认的对比策略, 按照下标, 没有任何问题</p><div class="language-jsx"><pre><code><span class="token comment">// 旧</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">张三</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">李四</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// 新</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">张三</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">李四</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">王五</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2 往前面加, 由于下标变了, 如果按照之前的下标对比, 元素是混乱的, 策略: 加上key</p><p>​ 一旦加上了key, 就是按照 key 进行新旧dom的对比了</p><div class="language-jsx"><pre><code><span class="token comment">// 旧 </span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>17<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">张三</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>31<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">李四</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// 新  [ { id: 17, name: &#39;张三&#39; }, ... ]</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>52<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">王五</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>17<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">张三</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>31<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">李四</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结: key 就是给 虚拟dom 添加了一个 标识, 优化了对比策略!!!</strong></p><h2 id="_10-vue-跳转路由时的传参方式-query和params的区别"><a class="header-anchor" href="#_10-vue-跳转路由时的传参方式-query和params的区别" aria-hidden="true">#</a> 10. Vue 跳转路由时的传参方式 (query和params的区别)</h2><ol><li>通过 query 传参</li></ol><div class="language-jsx"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/login?username=pp&amp;age=18&amp;desc=xx&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
        username<span class="token operator">:</span> <span class="token string">&#39;pp&#39;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
        desc<span class="token operator">:</span> <span class="token string">&#39;xxx&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;login&#39;</span><span class="token punctuation">,</span>
    query<span class="token operator">:</span> <span class="token punctuation">{</span>
        username<span class="token operator">:</span> <span class="token string">&#39;pp&#39;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
        desc<span class="token operator">:</span> <span class="token string">&#39;xxx&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>获取: this.$route.query.username</strong></p><ol start="2"><li>通过 params 传参, 必须通过命名路由的方式传递!</li></ol><div class="language-jsx"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">&#39;login&#39;</span><span class="token punctuation">,</span>
	params<span class="token operator">:</span> <span class="token punctuation">{</span>
	    username<span class="token operator">:</span> <span class="token string">&#39;pp&#39;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">18</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>获取: this.$route.params.username</strong></p><p><strong>区别:</strong></p><ol><li><p>params传参, 必须要用命名路由的方式传值</p></li><li><p>params传参, 不会显示在地址栏中, 刷新会丢失</p><p>可以配合 localStorage 使用</p><p>(1) A 跳转路由到 B, 通过 params 传值</p><p>(2) B 页面中, 立刻通过 this.$route.params 获取参数</p><p>​ (获取参数的逻辑, 优先从$route中拿, 如果拿不到(说明刷新了), 从本地取即可)</p><p>(3) 拿到参数后, 立刻存到本地 (保证刷新丢失后, 还能从本地拿)</p><p>(4) 实现功能...</p></li></ol><p>B页面的逻辑</p><div class="language-jsx"><pre><code><span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> username <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>username
    <span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 刚跳过来, 有参数, 立刻存起来</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;myParams&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 没有, 说明用户刷新了, 丢失了params, username参数, 本地拿</span>
        username <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;myParams&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>username
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_11-vue-项目进行-seo-优化"><a class="header-anchor" href="#_11-vue-项目进行-seo-优化" aria-hidden="true">#</a> 11. Vue 项目进行 SEO 优化</h2><p>Vue SPA单页面应用对SEO不太友好，当然也有相应的解决方案，下面列出几种SEO方案</p><ol><li><p>SSR服务器渲染</p><p>服务端渲染, 在服务端html页面节点, 已经解析创建完了, 浏览器直接拿到的是解析完成的页面解构</p><p>关于服务器渲染：<a href="https://ssr.vuejs.org/zh/#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93-ssr-%EF%BC%9F" target="_blank" rel="noopener noreferrer">Vue官网介绍</a> ，对Vue版本有要求，对服务器也有一定要求，需要支持nodejs环境。</p><p>优势: 更好的 SEO，由于搜索引擎爬虫抓取工具可以直接查看完全渲染的页面</p><p>缺点: 服务器nodejs环境的要求, 且对原代码的改造成本高! <code>nuxt.js</code> (坑比较多, 做好踩坑的准备)</p></li><li><p>静态化 (博客, 介绍性官网)</p><p>Nuxt.js 可以进行 generate 静态化打包, 缺点: 动态路由会被忽略。 <code>/users/:id</code></p><p>优势：</p><ul><li>编译打包时, 就会帮你处理, 纯静态文件，访问速度超快；</li><li>对比SSR，不涉及到服务器负载方面问题；</li><li>静态网页不宜遭到黑客攻击，安全性更高。</li></ul><p>不足：</p><ul><li>如果动态路由参数多的话不适用。</li></ul></li><li><p>预渲染 prerender-spa-plugin (插件)</p><p>如果你只是对少数页面需要做SEO处理（例如 / 首页, /about 关于等页面）</p><p>预渲染是一个非常好的方式, 预渲染会在构建时, 简单的针对特定路由, 生成静态 HTML 文件 (打包时可以帮你解析静态化)</p><p>优势: 设置预渲染简单, 对代码的改动小</p><p>缺点: 只适合于做少数页面进行SEO的情况, 如果页面几百上千, 就不推荐了 (会打包很慢)</p></li><li><p>使用Phantomjs <code>针对爬虫</code> 做处理</p><p>Phantomjs是一个基于webkit内核的无头浏览器，没有UI界面，就是一个浏览器，</p><p>其内的点击、翻页等人为相关操作需要程序设计实现。</p><p>这种解决方案其实是一种旁路机制，原理就是通过Nginx配置， 判断访问的来源UA是否是爬虫访问，</p><p>如果是则将搜索引擎的爬虫请求转发到一个node server，再通过PhantomJS来解析完整的HTML，返回给爬虫</p><p><img src="http://pic.qigou.top/vue/image-20210309024213922.png" alt=""></p></li><li><p>优势：</p><ul><li>完全不用改动项目代码，按原本的SPA开发即可，对比开发SSR成本小太多了；</li><li>对已用SPA开发完成的项目，这是不二之选。</li></ul><p>不足：</p><ul><li><p>部署需要node服务器支持；</p></li><li><p>爬虫访问比网页访问要慢一些，因为定时要定时资源加载完成才返回给爬虫；(不影响用户的访问)</p></li><li><p>如果被恶意模拟百度爬虫大量循环爬取，会造成服务器负载方面问题，</p><p>解决方法是判断访问的IP，是否是百度官方爬虫的IP。</p></li></ul></li></ol><p>小结:</p><ul><li><p>如果构建大型网站，如商城类 =&gt; SSR服务器渲染</p></li><li><p>如果只是正常公司官网, 博客网站等 =&gt; 预渲染/静态化/Phantomjs 都比较方便</p></li><li><p>如果是已用SPA开发完成的项目进行SEO优化，而且部署环境支持node服务器，使用 Phantomjs</p></li></ul><p>博客参考: <a href="https://www.jb51.net/article/164285.htm" target="_blank" rel="noopener noreferrer">SEO优化方案</a></p><h2 id="_12-vue-项目权限处理"><a class="header-anchor" href="#_12-vue-项目权限处理" aria-hidden="true">#</a> 12. Vue 项目权限处理</h2><p>现在权限相关管理系统用的框架都是element提供的<a href="https://panjiachen.github.io/vue-element-admin-site/zh/" target="_blank" rel="noopener noreferrer">vue-element-admin</a> 模板框架比较常见。</p><p>权限控制常见分为三大块</p><ul><li><strong>菜单权限控制</strong></li><li><strong>按钮权限控制</strong></li><li>请求url权限控制。</li></ul><p><strong>权限管理在后端中主要体现在对接口访问权限的控制，在前端中主要体现在对菜单访问权限的控制。</strong></p><ol><li><p>按钮权限控制比较容易，主要采取的方式是从后端返回按钮的权限标识，然后在前端进行显隐操作 v-if / disabled。</p></li><li><p>url权限控制，主要是后端代码来控制，前端只需要规范好格式即可。</p></li><li><p>剩下的菜单权限控制，是相对复杂一些的</p><p>(1) <strong>需要在路由设计时, 就拆分成静态路由和动态路由</strong></p><p>​ 静态路由: 所有用户都能访问到的路由, 不会动态变化的 (登录页, 首页, 404, ...)</p><p>​ 动态路由: 动态控制的路由, 只有用户有这个权限, 才将这个路由添加给你 (审批页, 社保页, 权限管理页...)</p><p>(2) 用户登录进入首页时, 需要立刻发送请求, 获取个人信息 (包含权限的标识)</p><p><img src="http://pic.qigou.top/vue/image-20210309031043592.png" alt=""></p><p>(3) <strong>利用权限信息的标识, 筛选出合适的动态路由</strong>, 通过路由的 <strong>addRoutes 方法</strong>, 动态添加路由即可!</p><p>(4) router.options.routes (拿的是默认配置的项, 拿不到动态新增的) 不是响应式的!</p><p>为了能正确的显示菜单, 为了能够将来正确的获取到用户路由, 我们需要用<strong>vuex管理routes路由数组</strong></p><p>(5) 利用vuex中的 routes, 动态渲染菜单</p></li></ol><h2 id="_13-vue-项目支付功能"><a class="header-anchor" href="#_13-vue-项目支付功能" aria-hidden="true">#</a> 13. Vue 项目支付功能</h2><p>支付宝方式：点击支付宝支付, 调用后台接口(携带订单号)，后台返回一个form表单(HTML字符串结构)，</p><p>提交form就可以调用支付宝支付</p><p>代码:</p><div class="language-jsx"><pre><code><span class="token comment">//  alipayWap: 后台接口返回的form 片段</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alipayWap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alipayWap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

methods<span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token function">toAlipay</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span> <span class="token punctuation">(</span>res <span class="token operator">=</span> <span class="token operator">&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>alipayWap <span class="token operator">=</span> res<span class="token punctuation">;</span>
             <span class="token comment">// 等待dom更新, 等页面中有这个form表单了</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            	<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>alipayWap<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          	<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="http://pic.qigou.top/vue/image-20210309032653781.png" alt=""></p><p>微信支付：需要自己根据后台返回的url生成二维码页面，如图所示</p><p><img src="http://pic.qigou.top/vue/image-20210309032629631.png" alt=""></p><p>博客参考1: <a href="https://blog.csdn.net/qq_36710522/article/details/90480914" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_36710522/article/details/90480914</a></p><p>博客参考2: <a href="https://blog.csdn.net/zyg1515330502/article/details/94737044" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/zyg1515330502/article/details/94737044</a></p><h2 id="_14-如何处理-打包出来的项目-首屏-加载过慢的问题"><a class="header-anchor" href="#_14-如何处理-打包出来的项目-首屏-加载过慢的问题" aria-hidden="true">#</a> 14. 如何处理 打包出来的项目(首屏)加载过慢的问题</h2><p>SPA应用: 单页应用程序, 所有的功能, 都在一个页面中, 如果第一次将所有的路由资源, 组件都加载了, 就会很慢!</p><p>加载过慢 =&gt; 一次性加载了过多的资源, 一次性加载了过大的资源</p><ul><li>加载过多 =&gt; 路由懒加载, 访问到路由, 再加载该路由相关的组件内容</li><li>加载过大 =&gt; 图片压缩, 文件压缩合并处理, 开启gzip压缩等</li></ul><p>比如:</p><ol><li><p>配置异步组件, 路由懒加载</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../pages/login.vue&#39;</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>图片压缩: 使用 webp 格式的图片, 提升首页加载的速度</p></li><li><p>CDN加速: 配置CDN加速, 加快资源的加载效率 (花钱)</p></li><li><p>开启 gzip 压缩 (一般默认服务器开启的, 如果没开, 确实可能会很慢, 可以让后台开一下)</p><p>...</p></li></ol><p><img src="http://pic.qigou.top/vue/image-20210309172322244.png" alt=""></p><p>博客: <a href="https://www.cnblogs.com/xidian-Jingbin/p/10643391.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/xidian-Jingbin/p/10643391.html</a></p><h2 id="_15-你在项目中遇到过什么技术难题"><a class="header-anchor" href="#_15-你在项目中遇到过什么技术难题" aria-hidden="true">#</a> 15. 你在项目中遇到过什么技术难题</h2><p><strong>问题: 考察解决问题的能力!</strong></p><p>话术: 前端要学的东西确实很多，但是并不夸张, 肯多花点时间沉淀一般都会有解决方案</p><p>一般遇到难题 (这些前端所谓的难题, 一般都是一些没有做过, 没有尝试过得一些业务), 我们要时刻保持独立思考，</p><p><strong>知道自己要做什么业务</strong>，<strong>由此决定要学什么知识</strong>, 然后<strong>实现业务</strong>, 举一反三，总结归纳!</p><p>比如1: 如果之前没有做过国际化, 换肤, 没有做过支付, 权限控制, 没有做过即时通信websocket, excel导入导出, 就会觉得很难,</p><p>但其实真正上手花时间去学着做了, 也都能逐步思考解决相关页面, 这些其实也都还 ok</p><p>比如2: 有时候, <code>复杂的或者困难的</code>, 并不是技术层面的, 而是<code>业务需求方面</code>的, 需要进行大量树形结构的处理</p><p>展示列表式数据时, 展示图表数据时, 筛选条件关联条件多了, 组件与组件的联动关系的控制也比较麻烦,</p><p>将联动的条件, 存vuex, 然后 =&gt; 进行分模块管理也是比较合适的选择</p><h2 id="_16-请简单介绍一下你的项目"><a class="header-anchor" href="#_16-请简单介绍一下你的项目" aria-hidden="true">#</a> 16. 请简单介绍一下你的项目</h2><p><strong>一定要做准备工作:</strong></p><p>项目的介绍, 因人而异, 可以找不同的网站, 先从网站的功能业务角度出发, 去介绍</p><p>然后思考: 如果是现在让你写这样的功能页面, 你会如何实现! 然后手写记录下来, 推算合理性 (遇到什么问题, 怎么解决的!),</p><p>逐步完善对于项目的介绍</p><p>以饿了么为例: <a href="https://github.com/bailicangdu/vue2-elm" target="_blank" rel="noopener noreferrer">https://github.com/bailicangdu/vue2-elm</a></p><p>1 基本业务介绍: 给用户提供外卖服务的</p><p>2 技术栈: vue2 + vuex + vue-router + webpack + ES6/7 + axios+ sass + flex + svg</p><p>3 功能需求介绍:</p><ul><li>定位功能</li><li>选择城市</li><li>搜索地址</li><li>展示所选地址附近商家列表</li><li>搜索美食，餐馆</li><li>根据距离、销量、评分、特色菜、配送方式等进行排序和筛选</li><li>餐馆食品列表页</li><li>购物车功能</li><li>店铺评价页面</li><li>单个食品详情页面</li><li>商家详情页</li><li>登录、注册</li><li>修改密码</li><li>个人中心</li><li>发送短信、语音验证</li><li>下单功能</li><li>订单列表</li><li>订单详情</li><li>下载App</li><li>添加、删除、修改收货地址</li><li>帐户信息</li><li>服务中心</li><li>红包</li><li>上传头像</li><li>付款</li></ul><p>4 哪些模块你是会的, 就可以着重介绍, 哪些模块不太会做, 就查资料, 对比方案, 构思思路。</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about.md\":\"042f8df5\",\"index.md\":\"c5094f27\",\"vue3.md\":\"94812054\",\"interview_interview-css.md\":\"92a0589b\",\"interview_interview-es6.md\":\"42726d2d\",\"interview_interview-html.md\":\"5973fc8d\",\"interview_interview-http.md\":\"e7814fa6\",\"interview_interview-js.md\":\"0e4c8ad7\",\"interview_interview-vue.md\":\"2597cbd3\"}")</script>
    <script type="module" async src="/assets/app.fbdbcb16.js"></script>
  </body>
</html>